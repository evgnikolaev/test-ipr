.modal {
  $root: &;

  position: relative;
  display: block;
  overflow: hidden;
  transition: transform 0.85s cubic-bezier(0.43, 0, 0.03, 1);
  max-height: -webkit-fill-available;

  // --message

  &--message {
    align-self: center;
    margin: rem(32) 0;
    opacity: 0;
    width: 100%;
    transition: transform 0.6s cubic-bezier(0.43, 0, 0.03, 1), opacity 0.5s cubic-bezier(0.43, 0, 0.03, 1);

    @include media-breakpoint-up(md) {
      margin: rem(32) auto;
      max-width: rem(640);
    }
    @include media-breakpoint-down(sm) {
      margin: rem(32) auto;
    }
    @media (max-height: 600px) {
      margin: 0;
      max-width: none;
      width: 100%;
      height: 100%;
    }
  }

  .mfp-ready &--message {
    transform: none;
    opacity: 1;
  }

  .mfp-removing &--message {
    opacity: 0;
  }

  // --error

  &--error {
    align-self: center;
    margin: rem(32) 0;
    opacity: 0;
    width: 100%;
    transition: transform 0.6s cubic-bezier(0.43, 0, 0.03, 1), opacity 0.5s cubic-bezier(0.43, 0, 0.03, 1);

    @include media-breakpoint-up(md) {
      margin: rem(32) auto;
      max-width: rem(640);
    }
    @include media-breakpoint-down(sm) {
      height: 100%;
    }
    @media (max-height: 600px) {
      margin: 0;
      max-width: none;
      width: 100%;
      height: 100%;
    }
  }

  .mfp-ready &--error {
    transform: none;
    opacity: 1;
  }

  .mfp-removing &--error {
    opacity: 0;
  }

  // --cookies

  &--cookies {
    align-self: center;
    margin: rem(32) 0;
    opacity: 0;
    width: 100%;
    transition: transform 0.6s cubic-bezier(0.43, 0, 0.03, 1), opacity 0.5s cubic-bezier(0.43, 0, 0.03, 1);

    @include media-breakpoint-up(md) {
      margin: rem(32) auto;
      max-width: rem(720);
    }
    @include media-breakpoint-down(sm) {
      height: 100%;
    }
    @media (max-height: 600px) {
      margin: 0;
      max-width: none;
      width: 100%;
      height: 100%;
    }

    #{$root}__switch-text {
      display: none;
      @include h3;

      > span {
        margin: 0 rem(4);
      }
    }

    &.switch {
      #{$root}__switch-text {
        display: block;
      }
    }
  }

  &--cookies.switch  {
    height: auto !important;
  }

  .mfp-ready &--cookies {
    transform: none;
    opacity: 1;
  }

  .mfp-removing &--cookies {
    opacity: 0;
  }

  // --form

  .mfp-ready &--form {
    transform: translateZ(0);
  }

  .mfp-removing &--form {
    transform: translate3d(100%, 0, 0);
  }

  &--form {
    margin-left: auto;
    transform: translate3d(100%, 0, 0);

    @include media-breakpoint-up(lg) {
      width: calc(58.3333% - #{rem(32)});
      padding-left: rem(16);
      height: calc(var(--vh2, 1vh) * 100);
    }
    @include media-breakpoint-only(md) {
      width: calc(100% - #{rem(40)});
    }
    @include media-breakpoint-down(sm) {
      width: calc(100% - #{rem(16)});
    }
    @include media-breakpoint-down(md) {
      height: calc(var(--vh2, 1vh) * 100);
    }
  }

  // --side-message

  .mfp-ready &--side-message {
    transform: translateZ(0);
  }

  .mfp-removing &--side-message {
    transform: translate3d(100%, 0, 0);
  }

  &--side-message {
    margin-left: auto;
    transform: translate3d(100%, 0, 0);

    @include media-breakpoint-up(lg) {
      width: calc(58.3333% - #{rem(32)});
      padding-left: rem(16);
      height: calc(var(--vh2, 1vh) * 100);
    }
    @include media-breakpoint-only(md) {
      width: calc(100% - #{rem(40)});
    }
    @include media-breakpoint-down(sm) {
      width: calc(100% - #{rem(16)});
    }
    @include media-breakpoint-down(md) {
      height: calc(var(--vh2, 1vh) * 100);
    }
  }

  // --sites

  .mfp-ready &--sites {
    transform: translateZ(0);
  }

  .mfp-removing &--sites {
    transform: translate3d(100%, 0, 0);
  }

  &--sites {
    margin-left: auto;
    transform: translate3d(100%, 0, 0);

    @include media-breakpoint-up(lg) {
      width: calc(75% - #{rem(24)});
      padding-left: rem(16);
      height: calc(var(--vh2, 1vh) * 100);
    }
    @include media-breakpoint-only(md) {
      width: calc(100% - #{rem(40)});
    }
    @include media-breakpoint-down(sm) {
      width: calc(100% - #{rem(16)});
    }
    @include media-breakpoint-down(md) {
      height: calc(var(--vh2, 1vh) * 100);
    }
  }

  // --gallery

  &--gallery {
    align-self: center;
    opacity: 0;
    transition: transform 0.6s cubic-bezier(0.43, 0, 0.03, 1), opacity 0.5s cubic-bezier(0.43, 0, 0.03, 1);
    //height: calc(var(--vh2, 1vh) * 100);
    background-color: $color-dark-grey;
    width: 100%;
    height: 100%;
    //height: -moz-available;
    //height: -webkit-fill-available;
    //height: fill-available;
    pointer-events: none;
    max-height: none;

    @include media-breakpoint-only(md) {
      padding-top: rem(80);
    }
    @include media-breakpoint-down(sm) {
      padding-top: rem(64);
      height: 100%;
    }
  }

  .mfp-ready &--gallery {
    transform: none;
    opacity: 1;
  }

  .mfp-removing &--gallery {
    opacity: 0;
  }

  // --person

  &--persons {
    align-self: center;
    opacity: 0;
    transition: transform 0.6s cubic-bezier(0.43, 0, 0.03, 1), opacity 0.5s cubic-bezier(0.43, 0, 0.03, 1);
    height: calc(var(--vh2, 1vh) * 100);
    background-color: $color-white;
    width: 100%;

    @include media-breakpoint-down(sm) {
      height: 100%;
    }
  }

  .mfp-ready &--persons {
    transform: none;
    opacity: 1;
  }

  .mfp-removing &--persons {
    opacity: 0;
  }

  // --video

  &--video {
    align-self: center;
    opacity: 0;
    transition: transform 0.6s cubic-bezier(0.43, 0, 0.03, 1), opacity 0.5s cubic-bezier(0.43, 0, 0.03, 1);
    height: calc(var(--vh2, 1vh) * 100);
    background-color: $color-dark-grey;
    width: 100%;

    @include media-breakpoint-down(sm) {
      height: 100%;
    }

    .modal-player {
      @include media-breakpoint-up(lg) {
        height: rem(712);
        padding-bottom: 0;
      }
    }
  }

  .mfp-ready &--video {
    transform: none;
    opacity: 1;
  }

  .mfp-removing &--video {
    opacity: 0;
  }

  &__wrapper {
    background-color: $color-white;
    height: 100%;

    #{$root}--gallery & {
      pointer-events: auto;
      @include media-breakpoint-up(lg) {
        max-width: 89.4%;
        width: 100%;
        margin-left: auto;
        margin-right: auto;
      }
    }

    #{$root}--video & {
      background-color: $color-dark-grey;
      overflow-y: auto;
      overflow-x: hidden;
      padding: rem(40) rem(16);

      @include media-breakpoint-up(lg) {
        padding: rem(32) 0;
      }
    }

    #{$root}--message & {
      @media (max-height: 600px) {
        overflow-y: auto;
      }
    }

    #{$root}--error & {
      @media (max-height: 600px) {
        overflow-y: auto;
      }
    }

    #{$root}--cookies & {
      @media (max-height: 600px) {
        overflow-y: auto;
      }
    }

    #{$root}--cookies.switch & {
      height: auto;
    }
  }

  &__container {
    overflow-y: auto;
    height: 100%;

    #{$root}--message & {
      @media (max-height: 600px) {
        height: auto;
        overflow-y: visible;
      }
    }

    #{$root}--error & {
      @media (max-height: 600px) {
        height: auto;
        overflow-y: visible;
      }
    }

    #{$root}--cookies & {
      @media (max-height: 600px) {
        height: auto;
        overflow-y: visible;
      }
    }
  }

  &__inner {
    #{$root}--message & {
      @include media-breakpoint-down(sm) {
        display: flex;
        align-items: center;
        height: 100%;
      }
    }

    #{$root}--error & {
      position: relative;

      @include media-breakpoint-down(sm) {
        display: flex;
        align-items: center;
        height: auto;
      }
    }

    #{$root}--cookies & {
      position: relative;

      @include media-breakpoint-down(sm) {
        display: flex;
        align-items: center;
        height: auto;
      }
    }

    #{$root}--form & {
      height: 100%;
    }

    #{$root}--side-message & {
      height: 100%;
    }
  }

  &__content {
    height: 100%;

    & > :last-child {
      margin-bottom: 0;
    }

    #{$root}--message & {
      padding: rem(40) rem(24) rem(40);

      @include media-breakpoint-up(md) {
        padding: rem(72) rem(80) rem(64);
      }
      @include media-breakpoint-down(sm) {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: flex-start;
      }
    }

    #{$root}--error & {
      padding: rem(40) rem(24) rem(40);

      @include media-breakpoint-up(md) {
        padding: rem(72) rem(80) rem(64);
      }
      @include media-breakpoint-down(sm) {
        //display: flex;
        //flex-direction: column;
        //justify-content: center;
        //align-items: flex-start;
      }
    }

    #{$root}--cookies & {
      padding: rem(40) rem(24) rem(40);

      @include media-breakpoint-up(md) {
        padding: rem(72) rem(64) rem(64) rem(80);
      }
    }

    #{$root}--side-message & {
      height: auto;
      max-width: rem(420);
      padding-top: rem(72);
      padding-bottom: rem(80);

      @include media-breakpoint-up(lg) {
        padding-top: rem(112);
        margin-left: rem(76);
      }
      @include media-breakpoint-only(md) {
        padding-top: rem(144);
        margin-left: rem(58);
      }
      @include media-breakpoint-down(sm) {
        padding-left: rem(28);
        padding-right: rem(40);
      }
    }

    #{$root}--sites & {
      padding: rem(72) rem(40) rem(80) rem(28);

      @include media-breakpoint-up(lg) {
        padding: rem(96) rem(80) rem(80) rem(108);
      }
      @include media-breakpoint-only(md) {
        padding: rem(96) rem(40) rem(80) rem(56);
      }
    }

    #{$root}--gallery & {
      @include media-breakpoint-up(lg) {
        padding: rem(64) 0;
      }
      @include media-breakpoint-only(md) {
        padding: rem(140) rem(40) rem(80);
      }
      @include media-breakpoint-down(sm) {
        padding: rem(72) rem(16) rem(64);
      }
    }

    #{$root}--persons & {
      padding: rem(40) 0 rem(64);

      @include media-breakpoint-up(md) {
        padding: rem(104) 0;
      }
    }
  }

  &__base {
    & > :last-child {
      margin-bottom: 0;
    }

    #{$root}.is-success &,
    #{$root}.is-error & {
      display: none;
    }

    #{$root}--form & {
      height: 100%;
    }

    #{$root}--video & {
      display: flex;
      flex-direction: column;
      align-items: stretch;
      justify-content: center;
      min-height: 100%;
      width: 100%;
      padding: 0 rem(24);

      @media (min-width: 1441px) {
        padding: 0 rem(160);
      }
      @media (max-width: 1440px) and (min-width: 990px) {
        padding: 0 rem(80);
      }
      @include media-breakpoint-only(md) {
        padding: 0 rem(40);
      }
    }

    #{$root}--cookies & {
      max-height: 50vh;
      overflow-y: auto;
      overflow-x: hidden;

      @media (max-height: 600px) {
        max-height: none;
        overflow: hidden;
      }
    }

    #{$root}--cookies.switch & {
      max-height: none;
      overflow: hidden;
    }
  }

  &__result {
    display: none;

    #{$root}.is-success &,
    #{$root}.is-error & {
      display: block;
    }

    #{$root}--form & {
      width: 100%;
      padding-top: rem(72);
      max-width: rem(424);

      @include media-breakpoint-up(lg) {
        margin-left: rem(76);
        padding-top: rem(112);
      }
      @include media-breakpoint-only(md) {
        padding-top: rem(144);
        margin-left: rem(56);
      }
      @include media-breakpoint-down(sm) {
        padding-left: rem(28);
        padding-right: rem(40);
      }
    }

    & > :last-child {
      margin-bottom: 0;
    }
  }

  &__heading {
    #{$root}--message & {
      margin-bottom: rem(24);

      @include media-breakpoint-down(sm) {
        margin-right: rem(80);
      }
    }

    #{$root}--error & {
      margin-bottom: rem(24);

      @include media-breakpoint-down(sm) {
        margin-right: rem(80);
      }
    }

    #{$root}--cookies & {
      margin-bottom: rem(24);

      @include media-breakpoint-down(sm) {
        margin-right: rem(80);
      }
    }

    #{$root}--cookies.switch & {
      display: none;
    }

    #{$root}--form & {
      margin-bottom: rem(20);

      @include media-breakpoint-up(md) {
        margin-bottom: rem(32);
      }
    }

    #{$root}--side-message & {
      margin-bottom: rem(24);

      @include media-breakpoint-up(md) {
        margin-bottom: rem(48);
      }
    }

    #{$root}--form #{$root}__result & {
      margin-bottom: rem(24);

      @include media-breakpoint-up(md) {
        margin-bottom: rem(48);
      }
    }

    #{$root}--gallery & {
      @include media-breakpoint-up(lg) {
        width: 66.6666%;
        margin: 0 auto rem(56);
      }
      @include media-breakpoint-only(md) {
        margin-bottom: rem(40);
      }
      @include media-breakpoint-down(sm) {
        margin-bottom: rem(24);
      }
    }
  }

  &__text {
    #{$root}--message & {
      max-width: rem(232);
      color: $color-dark-grey;
    }
    #{$root}--cookies & {
      padding-right: rem(16);
      p:not(:last-child) {
        margin-bottom: rem(8);
      }
    }

    #{$root}--cookies.switch & {
      display: none;
    }
  }

  &__action {
    #{$root}--message & {
      margin-top: rem(32);

      @include media-breakpoint-up(md) {
        margin-top: rem(48);
      }
    }

    #{$root}--side-message & {
      margin-top: rem(56);

      @include media-breakpoint-up(md) {
        margin-top: rem(64);
      }
    }
  }

  &__actions {
    display: flex;
    flex-wrap: wrap;

    #{$root}--cookies & {
      justify-content: center;
      margin: 0 rem(-16);

      #{$root}__action {
        margin: rem(16);
      }
    }

    #{$root}--cookies.switch & {
      display: none;
    }
  }

  &__close {
    position: absolute;
    display: block;
    z-index: 1;
    width: rem(32);
    height: rem(32);
    font-size: 0;
    line-height: rem(32);
    text-align: center;
    border: 0;
    padding: 0;
    color: $color-dark;
    background-color: transparent;
    cursor: pointer;

    &:focus {
      outline: none;
    }

    @include media-breakpoint-up(lg) {
      @include defaultTransition(color);

      &:hover {
        color: $color-blue;
      }
    }

    #{$root}--message & {
      top: rem(12);
      right: rem(12);

      @include media-breakpoint-up(md) {
        top: rem(32);
        right: rem(32);
      }
    }

    #{$root}--cookies.switch & {
      display: none;
    }

    #{$root}--error & {
      top: rem(12);
      right: rem(12);

      @include media-breakpoint-up(md) {
        top: rem(32);
        right: rem(32);
      }
    }

    #{$root}--cookies & {
      top: rem(12);
      right: rem(12);

      @include media-breakpoint-up(md) {
        top: rem(32);
        right: rem(32);
      }
    }

    #{$root}--form & {
      top: rem(20);
      right: rem(20);

      @include media-breakpoint-up(md) {
        top: rem(36);
        right: rem(36);
      }
    }

    #{$root}--side-message & {
      top: rem(20);
      right: rem(20);

      @include media-breakpoint-up(md) {
        top: rem(36);
        right: rem(36);
      }
    }

    #{$root}--sites & {
      top: rem(20);
      right: rem(20);

      @include media-breakpoint-up(md) {
        top: rem(36);
        right: rem(36);
      }
    }

    #{$root}--gallery & {
      color: $color-white;

      @include media-breakpoint-up(lg) {
        top: rem(36);
        right: rem(24);

        &:hover {
          color: rgba($color-white, 0.7);
        }
      }
      @include media-breakpoint-only(md) {
        top: rem(24);
        right: rem(36);
      }
      @include media-breakpoint-down(sm) {
        top: rem(16);
        right: rem(12);
      }
    }

    #{$root}--persons & {
      top: rem(36);
      right: rem(16);
      z-index: 2;

      @include media-breakpoint-up(lg) {
        top: rem(36);
        right: rem(36);
      }
      @include media-breakpoint-only(md) {
        top: rem(24);
        right: rem(36);
      }
    }

    #{$root}--video & {
      top: rem(20);
      right: rem(16);
      color: $color-white;

      @include media-breakpoint-up(lg) {
        top: rem(40);
        right: rem(20);

        &:hover {
          color: rgba($color-white, 0.7);
        }
      }
      @include media-breakpoint-down(sm) {
        top: rem(16);
        right: rem(8);
        width: rem(24);
        height: rem(24);

        .icon {
          width: rem(16);
          height: rem(16);
        }
      }
    }
  }

  &__fields {
    @include media-breakpoint-up(md) {
      display: flex;
      flex-wrap: wrap;
      margin-left: rem(-4);
      margin-right: rem(-4);
      #{$root}--cookies & {
        margin-left: 0;
        margin-right: 0;
      }

      #{$root}__field {
        width: 100%;
      }
    }

    #{$root}--cookies & {
      margin-top: rem(16);
      padding-right: rem(16);
    }

    #{$root}--cookies.switch & {
      display: none;
    }

    &-heading {
      @include h4;
      width: 100%;
      margin-bottom: rem(16);
    }
  }

  &__form {
    #{$root}--form & {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      height: 100%;
      padding-top: rem(56);

      @include media-breakpoint-up(lg) {
        padding-top: rem(88);
      }
      @include media-breakpoint-only(md) {
        padding-top: rem(120);
      }
    }

    #{$root}--error & {

    }
  }

  &__form-content {
    width: 100%;

    @include media-breakpoint-up(lg) {
      max-width: rem(640);
      margin-left: rem(76);
    }
    @include media-breakpoint-only(md) {
      padding-left: rem(56);
      padding-right: rem(40);
    }
    @include media-breakpoint-down(sm) {
      padding-left: rem(28);
      padding-right: rem(16);
    }
  }

  &__field {
    &:not(:last-child) {
      margin-bottom: rem(24);
    }


    #{$root}--form & {
      @include media-breakpoint-up(md) {
        width: 50%;
        padding-left: rem(4);
        padding-right: rem(4);

        @include last-row-with-item(2, #{$root}__field) {
          margin-bottom: 0;
        }
      }

      &--hidden {
        width: 0;
        margin: 0;
        padding: 0;
      }

      &--full {
        width: 100%;
      }
    }
  }

  &__require-message {
    @include text-small;
    color: $color-dark-grey;
    margin-top: rem(32);
    @include media-breakpoint-down(sm) {
      margin-top: rem(24);
    }

    &::before {
      content: '*';
      margin-right: rem(6);
      color: $color-error;
      @include text-small;
    }
  }

  &__agreement {
    margin-top: rem(32);

    @include media-breakpoint-up(md) {
      margin-top: rem(40);
      max-width: rem(430);
    }

    .checkbox__text {
      color: $color-dark-grey;
      @include text-small;
      margin-top: rem(-4);
    }
  }

  &__submit {
    #{$root}--form & {
      position: relative;
      display: flex;
      align-items: center;
      width: 100%;
      height: rem(80);
      background-color: $color-blue;
      color: $color-white;
      flex-shrink: 0;
      margin-top: rem(40);
      padding-left: rem(28);

      @include media-breakpoint-up(lg) {
        padding-left: rem(76);
      }
      @include media-breakpoint-only(md) {
        padding-left: rem(56);
      }

      .link-action {

        &__text {
          @include text-lead;
        }

        &:before {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          content: "";
        }
      }

      .link-action__text:after {
        content: none;
      }

      .icon {
        color: $color-white !important;
      }
    }
  }

  &__icon {
    #{$root}--side-message & {
      width: rem(52);
      height: rem(52);
      margin-bottom: rem(32);

      @include media-breakpoint-up(md) {
        width: rem(64);
        height: rem(64);
        margin-bottom: rem(40);
      }
    }

    #{$root}--form #{$root}__result & {
      width: rem(52);
      height: rem(52);
      margin-bottom: rem(32);

      @include media-breakpoint-up(md) {
        width: rem(64);
        height: rem(64);
        margin-bottom: rem(40);
      }
    }
  }

  &__accept {
    margin-top: rem(56);

    @include media-breakpoint-up(md) {
      margin-top: rem(64);
    }
  }

  &__groups {
    display: flex;
    flex-wrap: wrap;
  }

  &__title {
    width: 100%;
    margin-bottom: rem(24);

    @include media-breakpoint-up(md) {
      margin-bottom: rem(32);
    }
  }

  &__group {
    width: 100%;
    margin-bottom: rem(40);

    @include media-breakpoint-up(lg) {
      margin-bottom: rem(80);
    }
    @include media-breakpoint-only(md) {
      margin-bottom: rem(48);
    }

    &--25 {
      @include media-breakpoint-up(md) {
        width: 25%;
      }
    }

    &--50 {
      @include media-breakpoint-up(md) {
        width: 50%;
      }
    }

    &--75 {
      @include media-breakpoint-up(md) {
        width: 75%;
      }
    }
  }

  &__items {
    font-size: 0;
    line-height: 1;

    @include media-breakpoint-up(md) {
      display: flex;
      align-items: flex-start;
      flex-wrap: wrap;
      width: 100%;
    }
  }

  &__item {
    @include media-breakpoint-up(md) {
      width: 25%;
    }
    @include media-breakpoint-down(sm) {
      &:not(:last-child) {
        margin-bottom: rem(24);
      }
    }

    #{$root}__group--75 & {
      @include media-breakpoint-up(md) {
        width: 33.3333%;
      }
    }

    #{$root}__group--50 & {
      @include media-breakpoint-up(md) {
        width: 50%;
      }
    }

    #{$root}__group--25 & {
      @include media-breakpoint-up(md) {
        width: 100%;
      }
    }
  }

  &__caption {
    margin-bottom: rem(16);
  }

  &__list {
  }

  &__list-item {
    &:not(:last-child) {
      margin-bottom: rem(8);
    }
  }

  &__link {
    display: inline-block;

    @include media-breakpoint-up(lg) {
      @include defaultTransition(color);

      &:hover {
        color: rgba($color-blue, 0.7);
      }
    }
  }

  &__slider {
    #{$root}--gallery & {
      padding-bottom: rem(48);

      @include media-breakpoint-up(lg) {
        width: 66.6666%;
        margin-left: auto;
        margin-right: auto;
      }
    }

    #{$root}--persons & {
      padding-bottom: rem(48);
    }
  }

  &__video {
    position: relative;
    z-index: 1;
    width: 100%;
  }

  &__overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
}

.mfp-close {
  display: none !important;
}

.mfp-container {
  padding: 0;

  &:before {
    content: none;
  }
}

.mfp-content {
  display: flex;
  height: 100%;
}

html.modal-opened {
  overflow: hidden;
}
